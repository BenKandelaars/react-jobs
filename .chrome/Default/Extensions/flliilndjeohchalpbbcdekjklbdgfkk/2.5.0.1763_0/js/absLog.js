/*!
 * Â© 2016 Avira Operations GmbH & Co. KG. All rights reserved.
 * No part of this extension may be reproduced, stored or transmitted in any
 * form, for any reason or by any means, without the prior permission in writing
 * from the copyright owner. The text, layout, and designs presented are
 * protected by the copyright laws of the United States and international
 * treaties.
 */
!function e(t,n,o){function r(c,s){if(!n[c]){if(!t[c]){var a="function"==typeof require&&require;if(!s&&a)return a(c,!0);if(i)return i(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[c]={exports:{}};t[c][0].call(l.exports,function(e){var n=t[c][1][e];return r(n||e)},l,l.exports,e,t,n,o)}return n[c].exports}for(var i="function"==typeof require&&require,c=0;c<o.length;c++)r(o[c]);return r}({1:[function(e,t,n){"use strict";var o={getManifest:function(){return chrome.runtime.getManifest()},getURL:function(e){return chrome.extension.getURL(e)}};t.exports=o},{}],2:[function(e,t,n){"use strict";t.exports=e("./src/ContentMessenger")},{"./src/ContentMessenger":3}],3:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=e("./Messenger"),a=e("./ContentTopic"),u=e("./chrome"),l=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a)),n=e._onMessage.bind(e);return u.runtime.onMessage.addListener(n),window.addEventListener("unload",function(){u.runtime.onMessage.removeListener(n)}),u.runtime.connect({name:"ContentMessenger"}).onDisconnect.addListener(e._onDisconnect.bind(e)),e}return i(t,e),c(t,[{key:"_onMessage",value:function(e,t,n){if(!t.tab&&e.publish){var o=this._getTopic(e.publish);o&&o.publish(e.message,n)}return!0}},{key:"_onDisconnect",value:function(){var e=this._getTopic("Background:closed");e&&e.publish()}},{key:"publish",value:function(e,t,n){var o=10;!function r(){u.runtime.sendMessage({publish:e,message:t},function(e){var t=u.runtime.lastError;t&&"Could not establish connection. Receiving end does not exist."===t.message?(o-=1)&&setTimeout(r,50):"function"==typeof n&&n(e)})}()}}]),t}(s);t.exports=l},{"./ContentTopic":4,"./Messenger":5,"./chrome":7}],4:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=e("./Topic"),s=e("./chrome"),a=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.runtime.sendMessage({subscribe:e}),n}return i(t,e),t}(c);t.exports=a},{"./Topic":6,"./chrome":7}],5:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(t){o(this,e),this._topicClass=t,this._topics={}}return r(e,null,[{key:"getInstance",value:function(){return this._instance||(this._instance=new this),this._instance}}]),r(e,[{key:"_getTopic",value:function(e,t){var n=this._topics[e];return!n&&t&&(this._topics[e]=n=new this._topicClass(e)),n}},{key:"subscribe",value:function(e,t){this._getTopic(e,!0).subscribe(t)}},{key:"publish",value:function(e,t,n,o){var r=this._getTopic(e);r&&r.publish(t,n,o)}}]),e}();t.exports=i},{}],6:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(t){o(this,e),this._name=t,this._callbacks=[]}return r(e,[{key:"publish",value:function(e,t){var n=this._wrapCallback(t);this._callbacks.forEach(function(t){return t(e,n)})}},{key:"_wrapCallback",value:function(e){return null==e?e:function(){try{e.apply(void 0,arguments)}catch(e){if("Attempting to use a disconnected port object"!==e.message)throw e}}}},{key:"subscribe",value:function(e){this._callbacks.push(e)}}]),e}();t.exports=i},{}],7:[function(e,t,n){"use strict";t.exports=chrome},{}],8:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=e("content/messagingInterface"),c=e("browser_accessors/extensionAccessor");new(function(){function e(){o(this,e),this._downloadData=this._downloadData.bind(this),this._toggleLogging=this._toggleLogging.bind(this),this._init()}return r(e,[{key:"_init",value:function(){var e=this;document.getElementById("btn-download").addEventListener("click",this._downloadData),document.getElementById("btn-clear").addEventListener("click",this._clearData);var t=document.getElementById("cb-start-logging"),n=document.getElementById("log-content");i.publish("APLLog:active",null,function(n){t.checked=n,t.addEventListener("change",e._toggleLogging)}),i.publish("APLLog:get",{},function(t){n.value=e._prepareData(t)}),i.subscribe("APLLog:log",function(t){var o=t.logData;n.value=e._prepareData(o)})}},{key:"_prepareData",value:function(e){var t={userAgent:navigator.userAgent,absVersion:c.getManifest().version};return JSON.stringify({header:t,timeline:e.events},null,2)}},{key:"_downloadData",value:function(){var e=this;i.publish("APLLog:get",{},function(t){var n=e._prepareData(t);window.location="data:application/octet-stream;charset=utf-8,"+encodeURIComponent(n)})}},{key:"_clearData",value:function(){i.publish("APLLog:clear")}},{key:"_toggleLogging",value:function(e){return i.publish("APLLog:toggle",{active:e.target.checked})}}]),e}())},{"browser_accessors/extensionAccessor":1,"content/messagingInterface":9}],9:[function(e,t,n){"use strict";var o=e("messenger/Content"),r=o.getInstance();t.exports=r},{"messenger/Content":2}]},{},[8]);